<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>San Mateo Weather Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0d6efd" />


<link rel="icon" type="image/png" href="icons/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="icons/favicon.svg" />
<link rel="shortcut icon" href="icons/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="icons/apple-touch-icon.png" />
<link rel="manifest" href="icons/site.webmanifest" />


  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Weather Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.10/css/weather-icons.min.css"  />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/weather-icons/2.0.10/css/weather-icons-wind.min.css" />
  <link rel="stylesheet" href="/css/index.css" />

  <!-- Chart.js & Datalabels -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
  <!-- html2pdf -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js')
        .then(() => console.log("✅ Service Worker registered"))
        .catch(err => console.error("❌ Service Worker failed", err));
    }
  </script>
  

</head>
<body>
  
 <!-- <button class="btn btn-warning position-fixed end-0 btn-weather m-4 shadow"
  onclick="showWeatherPopup()">
  📍 Weather Info
</button>  -->

<div class="position-fixed bottom-0 end-0 p-3 z-3" style="z-index: 9999">
  <div id="refreshToast" class="toast align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="d-flex">
      <div class="toast-body">
        ✅ Weather updated successfully!
      </div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
  </div>
</div>

<br><br><br>
<div class="d-flex flex-wrap justify-content-center gap-3 px-3" id="weatherCardRow"></div>

<div class="container">
  <h2 class="text-center my-4">📅 7-Day Weather Forecast (San Mateo)</h2>
  <div class="table-responsive">
    <table class="table table-bordered table-striped table-hover align-middle">
      <thead class="table-dark">
        <tr>
          <th class="text-center align-middle">Date</th>
          <th class="text-center align-middle">Summary</th>
          <th class="text-center align-middle">Weather Icon</th>
          <th class="text-center align-middle">Temp (°C)<br>Min / Max</th>
          <th class="text-center align-middle">Feels Like (°C)<br>Day / Night</th>
          <th class="text-center align-middle">Humidity</th>
          <th class="text-center align-middle">Pressure</th>
          <th class="text-center align-middle">Clouds</th>
          <th class="text-center align-middle">Wind<br>Speed / Gust (m/s)</th>
          <th class="text-center align-middle">Precipitation %</th>
          <th class="text-center align-middle">Rain (mm)</th>
          <th class="text-center align-middle">UVI</th>
        </tr>
      </thead>
      <tbody id="forecastTableBody"></tbody>
    </table>
  </div>
</div>


<div class="container mt-5" id="chartsSection">
  <div class="row g-4">
    <div class="col-lg-6">
      <h5 class="text-center">📈 5-Day Temperature Forecast</h5>
      <canvas id="forecastChart"></canvas>
    </div>
    <div class="col-lg-6">
      <h5 class="text-center">🌙 Hourly Forecast (Next 12 Hours)</h5>
      <canvas id="hourlyChart"></canvas>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="weatherModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">San Mateo Weather</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" id="modalWeatherInfo">Loading...</div>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="js/index.js"></script>
</body>
</html>
